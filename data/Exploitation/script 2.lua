function onUpdate(elapsed)
	songPos = getSongPosition()
	local currentBeat = (songPos/4000)*(curBpm/120)
	
	if curStep >= 576 and curStep <= 768 then
			noteTweenX('PlayerStrumX0', 4, defaultPlayerStrumX0  - 80*math.sin((currentBeat+4*0.25)*math.pi), 0.5)
			noteTweenX('PlayerStrumX1', 5, defaultPlayerStrumX2 - 150 + 2000*math.sin((currentBeat+8*0.25)*math.pi), 3)
			noteTweenX('PlayerStrumX2', 6, defaultPlayerStrumX3 - 100*math.sin((currentBeat+4*0.25)*math.pi), 0.5)
			noteTweenX('PlayerStrumX3', 7, defaultPlayerStrumX1- 230 + 2000*math.sin((currentBeat+8*0.25)*math.pi), 3)
	
			noteTweenX('OpponentStrumX0', 0, defaultOpponentStrumX0 - 30*math.sin((currentBeat+4*0.25)*math.pi), 0.5)
			noteTweenX('OpponentStrumX1', 1, defaultOpponentStrumX2 - 320 - 2000*math.sin((currentBeat+8*0.25)*math.pi), 3)
			noteTweenX('OpponentStrumX2', 2, defaultOpponentStrumX3 - 150*math.sin((currentBeat+4*0.25)*math.pi), 0.5)
			noteTweenX('OpponentStrumX3', 3, defaultOpponentStrumX1 - 250 - 2000*math.sin((currentBeat+8*0.25)*math.pi), 3)
	end
	if curStep >= 768 and curStep <= 1022 then
		noteTweenX('PlayerStrumX0', 4, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat) + 0) * 300), 0.05)
		noteTweenX('PlayerStrumX1', 5, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat) + 1) * 300), 0.05)
		noteTweenX('PlayerStrumX2', 6, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat) + 2) * 300), 0.05)
		noteTweenX('PlayerStrumX3', 7, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat) + 3) * 300), 0.05)
		noteTweenY('PlayerStrumY0', 4, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 0) * 300), 0.05)
		noteTweenY('PlayerStrumY1', 5, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 1) * 300), 0.05)
		noteTweenY('PlayerStrumY2', 6, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 2) * 300), 0.05)
		noteTweenY('PlayerStrumY3', 7, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 3) * 300), 0.05)
		noteTweenX('OpponentStrumX0', 0, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat*2) + (4) * 2) * -300), 0.05)
		noteTweenX('OpponentStrumX1', 1, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat*2) + (5) * 2) * -300), 0.05)
		noteTweenX('OpponentStrumX2', 2, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat*2) + (6) * 2) * -300), 0.05)
		noteTweenX('OpponentStrumX3', 3, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat*2) + (7) * 2) * -300), 0.05)
		noteTweenY('OpponentStrumY0', 0, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (4) * 2) * 300), 0.05)
		noteTweenY('OpponentStrumY1', 1, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (5) * 2) * 300), 0.05)
		noteTweenY('OpponentStrumY2', 2, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (6) * 2) * 300), 0.05)
		noteTweenY('OpponentStrumY3', 3, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (7) * 2) * 300), 0.05)
	end
	if curStep >= 1024 and curStep <= 1152 or curStep >= 1952 and curStep <= 9999 then
		noteTweenX('PlayerStrumX0', 4, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat) + 0) * 300), 0.05)
		noteTweenX('PlayerStrumX1', 5, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat) + 1) * 200), 0.05)
		noteTweenX('PlayerStrumX2', 6, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat) + 2) * 300), 0.05)
		noteTweenX('PlayerStrumX3', 7, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat) + 3) * 300), 0.05)
		noteTweenY('PlayerStrumY0', 4, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 2) * 300), 0.05)
		noteTweenY('PlayerStrumY1', 5, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 1) * 200), 0.05)
		noteTweenY('PlayerStrumY2', 6, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 3) * 100), 0.05)
		noteTweenY('PlayerStrumY3', 7, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 3) * 300), 0.05)
		noteTweenX('OpponentStrumX0', 0, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat*2) + (4) * 2) * -300), 0.05)
		noteTweenX('OpponentStrumX1', 1, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat*2) + (5) * 1) * -300), 0.05)
		noteTweenX('OpponentStrumX2', 2, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat*2) + (6) * 2) * -300), 0.05)
		noteTweenX('OpponentStrumX3', 3, ((screenWidth / 2) - (157 / 2)) + (math.sin((currentBeat*2) + (7) * 2) * -300), 0.05)
		noteTweenY('OpponentStrumY0', 0, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (1) * 1) * 320), 0.05)
		noteTweenY('OpponentStrumY1', 1, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (2) * 1) * 360), 0.05)
		noteTweenY('OpponentStrumY2', 2, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (3) * 1) * 250), 0.05)
		noteTweenY('OpponentStrumY3', 3, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (4) * 1) * 200), 0.05)
	end
	if curStep >= 1152 and curStep <= 1824 then
		noteTweenX('PlayerStrumX0', 4, 600 + (math.sin((currentBeat+1) + 5) * 500), 0.05)
		noteTweenX('PlayerStrumX1', 5, 700 + (math.sin((currentBeat*3) + 7) * 500), 0.05)
		noteTweenX('PlayerStrumX2', 6, 600 + (math.sin((currentBeat*2) + 4) * 500), 0.05)
		noteTweenX('PlayerStrumX3', 7, 700 + (math.sin((currentBeat*3) + 3) * 500), 0.05)
		noteTweenY('PlayerStrumY0', 4, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 2) * 150), 0.05)
		noteTweenY('PlayerStrumY1', 5, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + 1) * 380), 0.05)
		noteTweenY('PlayerStrumY2', 6, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*1) + 3) * 210), 0.05)
		noteTweenY('PlayerStrumY3', 7, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat) + 3) * 130), 0.05)
		noteTweenX('OpponentStrumX0', 0, 600 + (math.sin((currentBeat*2) + (4) * 2) * -500), 0.05)
		noteTweenX('OpponentStrumX1', 1, 700 + (math.sin((currentBeat*2) + (5) * 1) * -500), 0.05)
		noteTweenX('OpponentStrumX2', 2, 600 + (math.sin((currentBeat*2) + (6) * 2) * -500), 0.05)
		noteTweenX('OpponentStrumX3', 3, 700 + (math.sin((currentBeat*2) + (7) * 2) * -500), 0.05)
		noteTweenY('OpponentStrumY0', 0, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (1) * 1) * 150), 0.05)
		noteTweenY('OpponentStrumY1', 1, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (2) * 1) * 240), 0.05)
		noteTweenY('OpponentStrumY2', 2, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (3) * 1) * 120), 0.05)
		noteTweenY('OpponentStrumY3', 3, ((screenHeight / 2) - (157 / 2)) + (math.cos((currentBeat*2) + (4) * 1) * 400), 0.05)
	end
		
end
function onBeatHit()
	if curBeat % 30 == 0 then
        for i = 0, getProperty('notes.length')-1 do
            setPropertyFromGroup('notes',i,'multSpeed',getRandomFloat(0.5,1))
        end
    end
end


function onCreate()

setPropertyFromClass('ClientPrefs', 'ghostTapping', false);

end

function onDestroy()

setPropertyFromClass('ClientPrefs', 'ghostTapping', true);

end



